<%- include('../../partials/header', { title: 'Assigned Tasks', user: user }) %>

<style>
  body {
    background-color: #f4f5f7;
  }

  .page-wrapper {
    padding: 2rem 0;
  }

  h3 {
    color: #2c3e50;
    font-weight: 600;
    margin-bottom: 1.5rem;
  }

  .tasks-card {
    background-color: #ffffff;
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 8px 25px rgba(0,0,0,0.08);
    overflow-x: auto;
  }

  table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
  }

  th, td {
    vertical-align: middle !important;
  }

  th {
    background-color: #3498db;
    color: #fff;
    font-weight: 500;
    text-align: center;
  }

  td {
    text-align: center;
  }

  tr:hover {
    background-color: #f1f3f6;
  }

  .badge {
    padding: 0.5em 0.75em;
    font-weight: 500;
    border-radius: 0.75rem;
    text-transform: capitalize;
  }

  .bg-success {
    background-color: #2ecc71 !important;
  }

  .bg-warning {
    background-color: #f1c40f !important;
    color: #2c3e50 !important;
  }

  @media (max-width: 767px) {
    th, td {
      font-size: 0.9rem;
    }
  }
</style>

<div class="page-wrapper">
  <div class="container-fluid">
    <div class="tasks-card">
      <h3>Assigned Tasks</h3>

      <% if (!tasks || tasks.length === 0) { %>
        <p class="text-muted">No tasks assigned yet.</p>
      <% } else { %>
        <table class="table table-borderless">
          <thead>
            <tr>
              <th>Task Title</th>
              <th>Description</th>
              <th>Assigned To</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <% tasks.forEach(task => { %>
              <tr>
                <td><%= task.title %></td>
                <td><%= task.description %></td>
                <td>
                  <% if (task.assignedTo) { %>
                    <%= task.assignedTo.name %> (<%= task.assignedTo.email %>)
                  <% } else { %>
                    <em>Unassigned</em>
                  <% } %>
                </td>
                <td>
                  <span class="badge 
                    <%= task.status.toLowerCase() === 'completed' ? 'bg-success' : 'bg-warning' %>">
                    <%= task.status %>
                  </span>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      <% } %>
    </div>
  </div>
</div>

<%- include('../../partials/footer') %>
